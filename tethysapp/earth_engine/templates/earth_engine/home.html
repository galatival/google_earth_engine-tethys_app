{% extends "earth_engine/base.html" %}
{% load tethys_gizmos static %}

{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
<!-- Current language: {{ LANGUAGE_CODE }} -->

{% block content_dependent_styles %}
{{ block.super }}

<link rel="stylesheet" href="{% static 'earth_engine/css/main.css' %}" />
<link rel="stylesheet" href="{% static 'earth_engine/css/map.css' %}" />
<link rel="stylesheet" href="{% static 'earth_engine/css/loader.css' %}" />
<link rel="stylesheet" href="{% static 'earth_engine/css/plot.css' %}" />



{% endblock %}
<!-- Overwrite the title so it translates-->
{% block app_title %}{% trans 'AppTitle' %}{% endblock %}


{% block import_gizmos %}
  {% import_gizmo_dependency plotly_view %}
{% endblock %}

{% block app_navigation_items %}
<div id="app-navigation-items">
    <h3 class="title" id="eeapp-selection-header">{% trans 'SelectionHeader' %} <a class="help" data-toggle="tooltip" href="#" data-placement="right" title="{% trans 'SelectHelp' %}">&#9432;</a></h3>

    {% gizmo platform_select %}
    {% gizmo sensor_select %}
    {% gizmo product_select %}
    {% gizmo start_date %}
    {% gizmo end_date %}
    {% gizmo reducer_select %}
    {% gizmo load_button %}
    {% gizmo clear_imagery_button %}
    <br>
    <br>

    <!-- Layer Selection -->
    {% gizmo select_layer %}
    <br>
    {% gizmo plot_button %}
    <a class="help" href="#" data-toggle="tooltip" data-placement="right" title="{% trans 'PlotHelp' %}">&#9432;</a>
    <br>

    <br>
    <input type="checkbox" name="labelfeatures" value="label">
    <label id="eeapp-label-check" for="labelcheck">{% trans 'LabelCheck' %}</label>
    <br>
    <br>

    <button type="button" id="eeapp-about-label">{% trans 'AboutButton' %}</button>
</div>
{% endblock %}

{% block app_content %}
  {% gizmo map_view %}
{% endblock %}

{# Use the after_app_content block for modals #}
{% block after_app_content %}
<!-- Plot Modal -->
<div class="modal fade" id="plot-modal" tabindex="-1" role="dialog" aria-labelledby="plot-modal-label">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h5 class="modal-title" id="plot-modal-label">{% trans 'AOIModalHeader' %}</h5>
            </div>
            <div class="modal-body">
                <div id="plot-container"></div>
            </div>
        </div>
    </div>
</div>
<!-- End Plot Modal -->
<!-- About Modal (make this into a separate url if it gets so long that you have to scroll) -->
<div class="modal fade" id="about-modal" tabindex="-1" role="dialog" aria-labelledby="about-modal-label">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h5 class="modal-title" id="about-label">About</h5>
            </div>
            <div class="modal-body">
                <div id="about-text">
                    <h6>{% trans 'RSSourceHeader' %}</h6>
                    <ul style="list-style-type:circle;">
                        <li><a href="https://developers.google.com/earth-engine/datasets/catalog/MODIS_006_MOD16A2" target="_blank" rel="noopener noreferrer">MODIS TERRA {% trans 'NetEvap8Day500m' %}</a></li>
                        <li><a href="https://developers.google.com/earth-engine/datasets/catalog/MODIS_006_MOD13A1" target="_blank" rel="noopener noreferrer">MODIS TERRA {% trans 'NDVI16Day500m' %}</a></li>
                        <li>Landsat 8 {% trans '8DayNDVI' %} [{% trans 'CalculatedFrom' %} <a href="https://developers.google.com/earth-engine/datasets/catalog/LANDSAT_LC08_C01_T1_RT_TOA" target="_blank" rel="noopener noreferrer">Landsat 8 TOA</a>, <a href="https://code.earthengine.google.com/1f6dace8e5892ad00523e0841cbda11e" target="_blank" rel="noopener noreferrer">{% trans 'ExampleCalc' %}</a>]</li>
                         <li>Landsat 8 {% trans '32DayNDVI' %} [{% trans 'CalculatedFrom' %} <a href="https://developers.google.com/earth-engine/datasets/catalog/LANDSAT_LC08_C01_T1_RT_TOA" target="_blank" rel="noopener noreferrer">Landsat 8 TOA</a>, <a href="https://code.earthengine.google.com/1f6dace8e5892ad00523e0841cbda11e" target="_blank" rel="noopener noreferrer">{% trans 'ExampleCalc' %}</a>]</li>
                    </ul>

                    <h6>{% trans 'AboutLayerHeader' %}</h6>
                    <ul style="list-style-type:circle;">
                        <li>{% trans 'Watersheds' %} (Pfafstetter lv. 9): <a href="https://www.hydrosheds.org/page/hydrobasins" target="_blank" rel="noopener noreferrer">HydroBASINS v1.c</a> [<a href="https://www.hydrosheds.org/images/inpages/HydroBASINS_TechDoc_v1c.pdf" target="_blank" rel="noopener noreferrer">{% trans 'Documentation' %}</a>] [<a href="https://www.hydrosheds.org/downloads" target="_blank" rel="noopener noreferrer">{% trans 'Download' %}</a>]</li>
                        <li>{% trans 'SettlProj' %}: <a href="https://www.gov.br/incra/pt-br" target="_blank" rel="noopener noreferrer">INCRA</a></li>
                        <li>{% trans 'AcreMunic' %}: <a href="https://www.ibge.gov.br/" target="_blank" rel="noopener noreferrer">IBGE</a></li>
                        <li>{% trans 'UcaDist' %}: <a href="https://www.inei.gob.pe/" target="_blank" rel="noopener noreferrer">INEI</a></li>
                        <li>{% trans 'UcaAcre' %}: <a href="https://www.ibge.gov.br/" target="_blank" rel="noopener noreferrer">IBGE</a>, <a href="https://www.inei.gob.pe/" target="_blank" rel="noopener noreferrer">INEI</a></li>
                        <li>{% trans 'TITitled' %}, {% trans 'TIUntitled' %}, {% trans 'TIReserves' %}, {% trans 'TIProposedReserves' %}: <a href="https://www.amazoniasocioambiental.org/" target="_blank" rel="noopener noreferrer">RAISG 2020</a> [<a href="https://www.amazoniasocioambiental.org/es/mapas/#download" target="_blank" rel="noopener noreferrer">{% trans 'Download' %}</a>]</li>
                        <li>{% trans 'ANPs' %}: <a href="https://www.amazoniasocioambiental.org/" target="_blank" rel="noopener noreferrer">RAISG 2020</a> [<a href="https://www.amazoniasocioambiental.org/es/mapas/#download" target="_blank" rel="noopener noreferrer">{% trans 'Download' %}</a>], <a href="https://www.gob.pe/sernanp" target="_blank" rel="noopener noreferrer">SERNANP</a></li>
                        <li>{% trans 'ProposedConserv' %}: <a href="https://www.gob.pe/regionucayali" target="_blank" rel="noopener noreferrer">GOREU</a></li>
                        <li>{% trans 'ConcessionsLogging' %}, {% trans 'ConcessionsConservation' %}, {% trans 'ConcessionsReforestation' %}, {% trans 'ConcessionsEcotourism' %}: <a href="https://www.gob.pe/serfor" target="_blank" rel="noopener noreferrer">SERFOR</a> [<a href="https://geo.serfor.gob.pe/visor/" target="_blank" rel="noopener noreferrer">{% trans 'Download' %}</a>]</li>
                        <li>{% trans 'PetroleumExt' %}, {% trans 'PetroleumProc' %}: <a href="https://www.amazoniasocioambiental.org/" target="_blank" rel="noopener noreferrer">RAISG 2020</a> [<a href="https://www.amazoniasocioambiental.org/es/mapas/#download" target="_blank" rel="noopener noreferrer">{% trans 'Download' %}</a>]</li>
                        <li>{% trans 'Mining' %}, {% trans 'IllegalMining' %}: <a href="https://www.amazoniasocioambiental.org/" target="_blank" rel="noopener noreferrer">RAISG 2020</a> [<a href="https://www.amazoniasocioambiental.org/es/mapas/#download" target="_blank" rel="noopener noreferrer">{% trans 'Download' %}</a>]</li>
                    </ul>

                    <h6>{% trans 'ContactHeader' %}</h6>
                    <p>{% trans 'ContactBody' %}</p>
                    <!--<p>TODO: check out for uploading shapefiles -------- <a href="http://docs.tethysplatform.org/en/stable/tutorials/google_earth_engine/part_2/clip_by_asset.html">link</a></p>-->
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End About Modal -->

<div id="ee-products" data-ee-products="{{ ee_products|jsonify }}"></div>
<div id="loader">
    <img src="{% static 'earth_engine/images/map-loader.gif' %}">
</div>
{% endblock %}

{% block scripts %}
{{ block.super }}
<script>var languageCode = "{{ LANGUAGE_CODE }}"</script>

<!-- Plotly localization -->
<script src="{% static 'earth_engine/js/plotly_i18n/plotly-locale-es-pe.js' %}"></script><!-- missing a lot, go to just es? -->
<script src="{% static 'earth_engine/js/plotly_i18n/plotly-locale-es.js' %}"></script>
<script src="{% static 'earth_engine/js/plotly_i18n/plotly-locale-pt-br.js' %}"></script>
<script>Plotly.setPlotConfig({ locale: "{{ LANGUAGE_CODE }}" })</script>

<script src="{% static 'earth_engine/js/gee_datasets.js' %}" type="text/javascript"></script>
{% endblock %}
